#!/bin/bash
set -e
cd `dirname $0`/..
set -v

./bin/bundle-audit update && ./bin/bundle-audit

./bin/cane --no-doc --style-measure 100

./bin/haml-lint --exclude-linter LineLength app/views/

./bin/puppet-lint puppet/manifests --fail-on-warnings --with-filename

./bin/rails_best_practices --silent --exclude puppet

./bin/rake coffeelint

./bin/rake immigrant:check_keys

./bin/rubocop --format simple

./bin/scss-lint --exclude-linter IdSelector app/assets/stylesheets/

# Run brakeman last as large output
./bin/brakeman --quiet --exit-on-warn --except CheckForgerySetting

# Code quality passed
