!function(){var n={},r=function(r){for(var t=n[r],o=t.deps,u=t.defn,i=o.length,c=new Array(i),f=0;f<i;++f)c[f]=e(o[f]);var a=u.apply(null,c);if(void 0===a)throw"module ["+r+"] returned undefined";t.instance=a},t=function(r,t,e){if("string"!=typeof r)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+r;if(void 0===e)throw"no definition function for "+r;n[r]={deps:t,defn:e,instance:void 0}},e=function(t){var e=n[t];if(void 0===e)throw"module ["+t+"] was undefined";return void 0===e.instance&&r(t),e.instance},o=function(n,r){for(var t=n.length,o=new Array(t),u=0;u<t;++u)o[u]=e(n[u]);r.apply(null,o)};({}).bolt={module:{api:{define:t,require:o,demand:e}}};var u=t,i=function(n,r){u(n,[],function(){return r})};u("1",[],function(){var n=function(r){var t=r,e=function(){return t};return{get:e,set:function(n){t=n},clone:function(){return n(e())}}};return n}),i("7",tinymce.util.Tools.resolve),u("2",["7"],function(n){return n("tinymce.PluginManager")}),u("3",[],function(){return{get:function(n){return{isEnabled:function(){return n.get()}}}}}),u("b",[],function(){return{fireVisualChars:function(n,r){return n.fire("VisualChars",{state:r})}}}),u("c",[],function(){var n={"\xa0":"nbsp","\xad":"shy"},r=function(n,r){var t,e="";for(t in n)e+=t;return new RegExp("["+e+"]",r?"g":"")},t=function(n){var r,t="";for(r in n)t&&(t+=","),t+="span.mce-"+n[r];return t};return{charMap:n,regExp:r(n),regExpGlobal:r(n,!0),selector:t(n),charMapToRegExp:r,charMapToSelector:t}}),i("i",Array),i("j",Error),u("l",["i","j"],function(n,r){var t=function(n){return function(){return n}};return{noop:function(){},noarg:function(n){return function(){return n()}},compose:function(n,r){return function(){return n(r.apply(null,arguments))}},constant:t,identity:function(n){return n},tripleEquals:function(n,r){return n===r},curry:function(r){for(var t=new n(arguments.length-1),e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=new n(arguments.length),o=0;o<e.length;o++)e[o]=arguments[o];var u=t.concat(e);return r.apply(null,u)}},not:function(n){return function(){return!n.apply(null,arguments)}},die:function(n){return function(){throw new r(n)}},apply:function(n){return n()},call:function(n){n()},never:t(!1),always:t(!0)}}),i("q",Object),u("h",["l","q"],function(n,r){var t,e,o,u,i=n.never,c=n.always,f=function(){return a},a=(u={fold:function(n){return n()},is:i,isSome:i,isNone:c,getOr:o=function(n){return n},getOrThunk:e=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},or:o,orThunk:e,map:f,ap:f,each:function(){},bind:f,flatten:f,exists:i,forall:c,filter:f,equals:t=function(n){return n.isNone()},equals_:t,toArray:function(){return[]},toString:n.constant("none()")},r.freeze&&r.freeze(u),u),l=function(n){var r=function(){return n},t=function(){return o},e=function(r){return r(n)},o={fold:function(r,t){return t(n)},is:function(r){return n===r},isSome:c,isNone:i,getOr:r,getOrThunk:r,getOrDie:r,or:t,orThunk:t,map:function(r){return l(r(n))},ap:function(r){return r.fold(f,function(r){return l(r(n))})},each:function(r){r(n)},bind:e,flatten:r,exists:e,forall:e,filter:function(r){return r(n)?o:a},equals:function(r){return r.is(n)},equals_:function(r,t){return r.fold(i,function(r){return t(n,r)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o};return{some:l,none:f,from:function(n){return null===n||void 0===n?a:l(n)}}}),i("k",String),u("e",["h","i","j","k"],function(n,r,t,e){var o,u=void 0===(o=r.prototype.indexOf)?function(n,r){return w(n,r)}:function(n,r){return o.call(n,r)},i=function(r,t){var e=u(r,t);return-1===e?n.none():n.some(e)},c=function(n,r){return u(n,r)>-1},f=function(n,r){return y(n,r).isSome()},a=function(n,r){for(var t=[],e=0;e<n;e++)t.push(r(e));return t},l=function(n,r){for(var t=[],e=0;e<n.length;e+=r){var o=n.slice(e,e+r);t.push(o)}return t},s=function(n,t){for(var e=n.length,o=new r(e),u=0;u<e;u++){var i=n[u];o[u]=t(i,u,n)}return o},d=function(n,r){for(var t=0,e=n.length;t<e;t++){r(n[t],t,n)}},h=function(n,r){for(var t=n.length-1;t>=0;t--){r(n[t],t,n)}},v=function(n,r){for(var t=[],e=[],o=0,u=n.length;o<u;o++){var i=n[o];(r(i,o,n)?t:e).push(i)}return{pass:t,fail:e}},m=function(n,r){for(var t=[],e=0,o=n.length;e<o;e++){var u=n[e];r(u,e,n)&&t.push(u)}return t},g=function(n,r){if(0===n.length)return[];for(var t=r(n[0]),e=[],o=[],u=0,i=n.length;u<i;u++){var c=n[u],f=r(c);f!==t&&(e.push(o),o=[]),t=f,o.push(c)}return 0!==o.length&&e.push(o),e},p=function(n,r,t){return h(n,function(n){t=r(t,n)}),t},T=function(n,r,t){return d(n,function(n){t=r(t,n)}),t},E=function(r,t){for(var e=0,o=r.length;e<o;e++){var u=r[e];if(t(u,e,r))return n.some(u)}return n.none()},y=function(r,t){for(var e=0,o=r.length;e<o;e++){if(t(r[e],e,r))return n.some(e)}return n.none()},w=function(n,r){for(var t=0,e=n.length;t<e;++t)if(n[t]===r)return t;return-1},N=r.prototype.push,C=function(n){for(var e=[],o=0,u=n.length;o<u;++o){if(!r.prototype.isPrototypeOf(n[o]))throw new t("Arr.flatten item "+o+" was not an array, input: "+n);N.apply(e,n[o])}return e},O=function(n,r){var t=s(n,r);return C(t)},M=function(n,r){for(var t=0,e=n.length;t<e;++t){if(!0!==r(n[t],t,n))return!1}return!0},b=function(n,r){return n.length===r.length&&M(n,function(n,t){return n===r[t]})},x=r.prototype.slice;return{map:s,each:d,eachr:h,partition:v,filter:m,groupBy:g,indexOf:i,foldr:p,foldl:T,find:E,findIndex:y,flatten:C,bind:O,forall:M,exists:f,contains:c,equal:b,reverse:function(n){var r=x.call(n,0);return r.reverse(),r},chunk:l,difference:function(n,r){return m(n,function(n){return!c(r,n)})},mapToObject:function(n,r){for(var t={},o=0,u=n.length;o<u;o++){var i=n[o];t[e(i)]=r(i,o)}return t},pure:function(n){return[n]},sort:function(n,r){var t=x.call(n,0);return t.sort(r),t},range:a,head:function(r){return 0===r.length?n.none():n.some(r[0])},last:function(r){return 0===r.length?n.none():n.some(r[r.length-1])}}}),u("m",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),i("n",document),u("f",["l","h","j","m","n"],function(n,r,t,e,o){var u=function(n,r){var t=(r||o).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||t.childNodes.length>1)throw e.error("HTML does not have a single root node",n),"HTML must have a single root node";return f(t.childNodes[0])},i=function(n,r){var t=(r||o).createElement(n);return f(t)},c=function(n,r){var t=(r||o).createTextNode(n);return f(t)},f=function(r){if(null===r||void 0===r)throw new t("Node cannot be null or undefined");return{dom:n.constant(r)}};return{fromHtml:u,fromTag:i,fromText:c,fromDom:f,fromPoint:function(n,t,e){return r.from(n.dom().elementFromPoint(t,e)).map(f)}}}),u("o",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),u("g",["o"],function(n){var r=function(n){return n.dom().nodeName.toLowerCase()},t=function(n){return n.dom().nodeType},e=function(n){return n.dom().nodeValue},o=function(n){return function(r){return t(r)===n}},u=function(e){return t(e)===n.COMMENT||"#comment"===r(e)},i=o(n.ELEMENT),c=o(n.TEXT),f=o(n.DOCUMENT);return{name:r,type:t,value:e,isElement:i,isText:c,isDocument:f,isComment:u}}),u("p",["c"],function(n){return{wrapCharWithSpan:function(r){return'<span data-mce-bogus="1" class="mce-'+n.charMap[r]+'">'+r+"</span>"}}}),u("d",["e","f","g","c","p"],function(n,r,t,e,o){var u=function(t,e){var o=[],i=t.dom(),c=n.map(i.childNodes,r.fromDom);return n.each(c,function(n){e(n)&&(o=o.concat([n])),o=o.concat(u(n,e))}),o};return{isMatch:function(n){return t.isText(n)&&void 0!==t.value(n)&&e.regExp.test(t.value(n))},filterDescendants:u,findParentElm:function(n,r){for(;n.parentNode;){if(n.parentNode===r)return n;n=n.parentNode}},replaceWithSpans:function(n){return n.replace(e.regExpGlobal,o.wrapCharWithSpan)}}}),u("a",["c","d","e","f","g"],function(n,r,t,e,o){var u=function(n,u){var i,c,f=r.filterDescendants(e.fromDom(u),r.isMatch);t.each(f,function(t){var e=r.replaceWithSpans(o.value(t));for(c=n.dom.create("div",null,e);i=c.lastChild;)n.dom.insertAfter(i,t.dom());n.dom.remove(t.dom())})},i=function(r,e){var o=r.dom.select(n.selector,e);t.each(o,function(n){r.dom.remove(n,1)})};return{show:u,hide:i,toggle:function(n){var t=n.getBody(),e=n.selection.getBookmark(),o=r.findParentElm(n.selection.getNode(),t);i(n,o=void 0!==o?o:t),u(n,o),n.selection.moveToBookmark(e)}}}),u("8",["b","a"],function(n,r){return{toggleVisualChars:function(t,e){var o,u=t.getBody(),i=t.selection;e.set(!e.get()),n.fireVisualChars(t,e.get()),o=i.getBookmark(),!0===e.get()?r.show(t,u):r.hide(t,u),i.moveToBookmark(o)}}}),u("4",["8"],function(n){return{register:function(r,t){r.addCommand("mceVisualChars",function(){n.toggleVisualChars(r,t)})}}}),u("9",["7"],function(n){return n("tinymce.util.Delay")}),u("5",["9","a"],function(n,r){return{setup:function(t,e){var o=n.debounce(function(){r.toggle(t)},300);!1!==t.settings.forced_root_block&&t.on("keydown",function(n){!0===e.get()&&(13===n.keyCode?r.toggle(t):o())})}}}),u("6",[],function(){var n=function(n){return function(r){var t=r.control;n.on("VisualChars",function(n){t.active(n.state)})}};return{register:function(r){r.addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:n(r)}),r.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:n(r),selectable:!0,context:"view",prependToContext:!0})}}}),u("0",["1","2","3","4","5","6"],function(n,r,t,e,o,u){return r.add("visualchars",function(r){var i=n(!1);return e.register(r,i),u.register(r),o.setup(r,i),t.get(i)}),function(){}}),e("0")()}();