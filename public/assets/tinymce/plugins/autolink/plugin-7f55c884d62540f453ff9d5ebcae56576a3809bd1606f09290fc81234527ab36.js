!function(){var n={},e=function(e){for(var t=n[e],o=t.deps,r=t.defn,f=o.length,d=new Array(f),a=0;a<f;++a)d[a]=i(o[a]);var s=r.apply(null,d);if(void 0===s)throw"module ["+e+"] returned undefined";t.instance=s},t=function(e,t,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;n[e]={deps:t,defn:i,instance:void 0}},i=function(t){var i=n[t];if(void 0===i)throw"module ["+t+"] was undefined";return void 0===i.instance&&e(t),i.instance},o=function(n,e){for(var t=n.length,o=new Array(t),r=0;r<t;++r)o.push(i(n[r]));e.apply(null,e)};({}).bolt={module:{api:{define:t,require:o,demand:i}}};var r=t;(function(n,e){r(n,[],function(){return e})})("3",tinymce.util.Tools.resolve),r("1",["3"],function(n){return n("tinymce.Env")}),r("2",["3"],function(n){return n("tinymce.PluginManager")}),r("0",["1","2"],function(n,e){return e.add("autolink",function(e){function t(n){r(n,-1,"(",!0)}function i(n){r(n,0,"",!0)}function o(n){r(n,-1,"",!1)}function r(n,e,t){function i(n,e){if(e<0&&(e=0),3==n.nodeType){var t=n.data.length;e>t&&(e=t)}return e}function o(n,e){1!=n.nodeType||n.hasChildNodes()?f.setStart(n,i(n,e)):f.setStartBefore(n)}function r(n,e){1!=n.nodeType||n.hasChildNodes()?f.setEnd(n,i(n,e)):f.setEndAfter(n)}var f,s,u,l,c,g,h,p,m,v;if("A"!=n.selection.getNode().tagName){if(f=n.selection.getRng(!0).cloneRange(),f.startOffset<5){if(!(p=f.endContainer.previousSibling)){if(!f.endContainer.firstChild||!f.endContainer.firstChild.nextSibling)return;p=f.endContainer.firstChild.nextSibling}if(m=p.length,o(p,m),r(p,m),f.endOffset<5)return;s=f.endOffset,l=p}else{if(l=f.endContainer,3!=l.nodeType&&l.firstChild){for(;3!=l.nodeType&&l.firstChild;)l=l.firstChild;3==l.nodeType&&(o(l,0),r(l,l.nodeValue.length))}s=1==f.endOffset?2:f.endOffset-1-e}u=s;do{o(l,s>=2?s-2:0),r(l,s>=1?s-1:0),s-=1,v=f.toString()}while(" "!=v&&""!==v&&160!=v.charCodeAt(0)&&s-2>=0&&v!=t);a(f.toString(),t)?(o(l,s),r(l,u),s+=1):0===f.startOffset?(o(l,0),r(l,u)):(o(l,s),r(l,u)),g=f.toString(),"."==g.charAt(g.length-1)&&r(l,u-1),g=f.toString(),(h=g.match(d))&&("www."==h[1]?h[1]="http://www.":/@$/.test(h[1])&&!/^mailto:/.test(h[1])&&(h[1]="mailto:"+h[1]),c=n.selection.getBookmark(),n.selection.setRng(f),n.execCommand("createlink",!1,h[1]+h[2]),n.settings.default_link_target&&n.dom.setAttrib(n.selection.getNode(),"target",n.settings.default_link_target),n.selection.moveToBookmark(c),n.nodeChanged())}}var f,d=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i;if(e.settings.autolink_pattern&&(d=e.settings.autolink_pattern),e.on("keydown",function(n){if(13==n.keyCode)return o(e)}),n.ie)return void e.on("focus",function(){if(!f){f=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(n){}}});e.on("keypress",function(n){if(41==n.keyCode)return t(e)}),e.on("keyup",function(n){if(32==n.keyCode)return i(e)});var a=function(n,e){return n==e||" "===n||160==n.charCodeAt(0)}}),function(){}}),i("0")()}();