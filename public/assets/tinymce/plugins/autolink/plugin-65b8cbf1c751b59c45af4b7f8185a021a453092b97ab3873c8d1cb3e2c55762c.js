!function(){var n={},e=function(e){for(var t=n[e],o=t.deps,r=t.defn,f=o.length,d=new Array(f),a=0;a<f;++a)d[a]=i(o[a]);var s=r.apply(null,d);if(void 0===s)throw"module ["+e+"] returned undefined";t.instance=s},t=function(e,t,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;n[e]={deps:t,defn:i,instance:void 0}},i=function(t){var i=n[t];if(void 0===i)throw"module ["+t+"] was undefined";return void 0===i.instance&&e(t),i.instance},o=function(n,e){for(var t=n.length,o=new Array(t),r=0;r<t;++r)o.push(i(n[r]));e.apply(null,e)};({}).bolt={module:{api:{define:t,require:o,demand:i}}};var r=t;(function(n,e){r(n,[],function(){return e})})("3",tinymce.util.Tools.resolve),r("1",["3"],function(n){return n("tinymce.Env")}),r("2",["3"],function(n){return n("tinymce.PluginManager")}),r("0",["1","2"],function(n,e){var t=function(n,e){return n===e||" "===n||160===n.charCodeAt(0)};return e.add("autolink",function(e){function i(n){f(n,-1,"(",!0)}function o(n){f(n,0,"",!0)}function r(n){f(n,-1,"",!1)}function f(n,e,i){function o(n,e){if(e<0&&(e=0),3==n.nodeType){var t=n.data.length;e>t&&(e=t)}return e}function r(n,e){1!=n.nodeType||n.hasChildNodes()?d.setStart(n,o(n,e)):d.setStartBefore(n)}function f(n,e){1!=n.nodeType||n.hasChildNodes()?d.setEnd(n,o(n,e)):d.setEndAfter(n)}var d,s,u,l,c,g,h,p,m,v;if("A"!=n.selection.getNode().tagName){if(d=n.selection.getRng(!0).cloneRange(),d.startOffset<5){if(!(p=d.endContainer.previousSibling)){if(!d.endContainer.firstChild||!d.endContainer.firstChild.nextSibling)return;p=d.endContainer.firstChild.nextSibling}if(m=p.length,r(p,m),f(p,m),d.endOffset<5)return;s=d.endOffset,l=p}else{if(l=d.endContainer,3!=l.nodeType&&l.firstChild){for(;3!=l.nodeType&&l.firstChild;)l=l.firstChild;3==l.nodeType&&(r(l,0),f(l,l.nodeValue.length))}s=1==d.endOffset?2:d.endOffset-1-e}u=s;do{r(l,s>=2?s-2:0),f(l,s>=1?s-1:0),s-=1,v=d.toString()}while(" "!=v&&""!==v&&160!=v.charCodeAt(0)&&s-2>=0&&v!=i);t(d.toString(),i)?(r(l,s),f(l,u),s+=1):0===d.startOffset?(r(l,0),f(l,u)):(r(l,s),f(l,u)),g=d.toString(),"."==g.charAt(g.length-1)&&f(l,u-1),g=d.toString(),(h=g.match(a))&&("www."==h[1]?h[1]="http://www.":/@$/.test(h[1])&&!/^mailto:/.test(h[1])&&(h[1]="mailto:"+h[1]),c=n.selection.getBookmark(),n.selection.setRng(d),n.execCommand("createlink",!1,h[1]+h[2]),n.settings.default_link_target&&n.dom.setAttrib(n.selection.getNode(),"target",n.settings.default_link_target),n.selection.moveToBookmark(c),n.nodeChanged())}}var d,a=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i;return e.settings.autolink_pattern&&(a=e.settings.autolink_pattern),e.on("keydown",function(n){if(13==n.keyCode)return r(e)}),n.ie?void e.on("focus",function(){if(!d){d=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(n){}}}):(e.on("keypress",function(n){if(41==n.keyCode)return i(e)}),void e.on("keyup",function(n){if(32==n.keyCode)return o(e)}))}),function(){}}),i("0")()}();