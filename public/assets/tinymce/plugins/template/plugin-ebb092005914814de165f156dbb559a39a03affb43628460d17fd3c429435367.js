!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,l=n.defn,i=r.length,o=new Array(i),c=0;c<i;++c)o[c]=a(r[c]);var u=l.apply(null,o);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,a){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===a)throw"no definition function for "+t;e[t]={deps:n,defn:a,instance:void 0}},a=function(n){var a=e[n];if(void 0===a)throw"module ["+n+"] was undefined";return void 0===a.instance&&t(n),a.instance},r=function(e,t){for(var n=e.length,r=new Array(n),l=0;l<n;++l)r.push(a(e[l]));t.apply(null,t)};({}).bolt={module:{api:{define:n,require:r,demand:a}}};var l=n,i=function(e,t){l(e,[],function(){return t})};i("9",Array),i("a",Error),l("1",["9","a"],function(e,t){var n=function(){},a=function(e,t){return function(){return e(t.apply(null,arguments))}},r=function(e){return function(){return e}},l=function(e){return e},i=function(e,t){return e===t},o=function(t){for(var n=new e(arguments.length-1),a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){for(var a=new e(arguments.length),r=0;r<a.length;r++)a[r]=arguments[r];var l=n.concat(a);return t.apply(null,l)}};return{noop:n,compose:a,constant:r,identity:l,tripleEquals:i,curry:o,not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:r(!1),always:r(!0)}}),i("b",tinymce.util.Tools.resolve),l("2",["b"],function(e){return e("tinymce.dom.DOMUtils")}),l("3",["b"],function(e){return e("tinymce.PluginManager")}),l("4",["b"],function(e){return e("tinymce.util.JSON")}),l("5",["b"],function(e){return e("tinymce.util.Tools")}),l("6",["b"],function(e){return e("tinymce.util.XHR")}),l("7",[],function(){var e=function(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e};return{getDateTime:function(t,n,a){var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),l="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),i="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),o="January February March April May June July August September October November December".split(" ");return a=a||new Date,n=n.replace("%D","%m/%d/%Y"),n=n.replace("%r","%I:%M:%S %p"),n=n.replace("%Y",""+a.getFullYear()),n=n.replace("%y",""+a.getYear()),n=n.replace("%m",e(a.getMonth()+1,2)),n=n.replace("%d",e(a.getDate(),2)),n=n.replace("%H",""+e(a.getHours(),2)),n=n.replace("%M",""+e(a.getMinutes(),2)),n=n.replace("%S",""+e(a.getSeconds(),2)),n=n.replace("%I",""+((a.getHours()+11)%12+1)),n=n.replace("%p",a.getHours()<12?"AM":"PM"),n=n.replace("%B",""+t.translate(o[a.getMonth()])),n=n.replace("%b",""+t.translate(i[a.getMonth()])),n=n.replace("%A",""+t.translate(l[a.getDay()])),n=n.replace("%a",""+t.translate(r[a.getDay()])),n=n.replace("%%","%")}}}),l("8",["5","6","7"],function(e,t,n){var a=function(e,n){return function(){var a=e.templates;return"function"==typeof a?void a(n):void("string"==typeof a?t.send({url:a,success:function(e){n(JSON.parse(e))}}):n(a))}},r=function(t,n,a){return e.each(t.getParam(a),function(e,t){"function"==typeof e&&(e=e(t)),n=n.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)}),n},l=function(t,n){var a=t.dom,r=t.getParam("template_replace_values");e.each(a.select("*",n),function(t){e.each(r,function(e,n){a.hasClass(t,n)&&"function"==typeof r[n]&&r[n](t)})})},i=function(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)};return{createTemplateList:a,replaceTemplateValues:r,replaceVals:l,insertTemplate:function(t,a,o){var c,u,s=t.dom,p=t.selection.getContent();o=r(t,o,"template_replace_values"),c=s.create("div",null,o),u=s.select(".mceTmpl",c),u&&u.length>0&&(c=s.create("div",null),c.appendChild(u[0].cloneNode(!0))),e.each(s.select("*",c),function(e){i(e,t.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(e.innerHTML=n.getDateTime(t,t.getParam("template_cdate_format",t.getLang("template.cdate_format")))),i(e,t.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(e.innerHTML=n.getDateTime(t,t.getParam("template_mdate_format",t.getLang("template.mdate_format")))),i(e,t.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(e.innerHTML=p)}),l(t,c),t.execCommand("mceInsertContent",!1,c.innerHTML),t.addVisual()}}}),l("0",["1","2","3","4","5","6","7","8"],function(e,t,n,a,r,l,i,o){var c=function(e,t,n){if(-1==n.indexOf("<html>")){var a="";r.each(e.contentCSS,function(t){a+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'});var l=e.settings.body_class||"";-1!=l.indexOf("=")&&(l=e.getParam("body_class","","hash"),l=l[e.id]||""),n="<!DOCTYPE html><html><head>"+a+'</head><body class="'+l+'">'+n+"</body></html>"}n=o.replaceTemplateValues(e,n,"template_preview_replace_values");var i=t.find("iframe")[0].getEl().contentWindow.document;i.open(),i.write(n),i.close()};return n.add("template",function(n){function a(e){var a,i,u=[];if(!e||0===e.length){var s=n.translate("No templates defined.");return void n.notificationManager.open({text:s,type:"info"})}r.each(e,function(e){u.push({selected:!u.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})});var p=function(e){var t=e.control.value();t.url?l.send({url:t.url,success:function(e){i=e,c(n,a,i)}}):(i=t.content,c(n,a,i)),a.find("#description")[0].text(e.control.value().description)};a=n.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:u,onselect:p}}]},{type:"label",name:"description",label:"Description",text:"\xa0"},{type:"iframe",flex:1,border:1}],onsubmit:function(){o.insertTemplate(n,!1,i)},minWidth:Math.min(t.DOM.getViewPort().w,n.getParam("template_popup_width",600)),minHeight:Math.min(t.DOM.getViewPort().h,n.getParam("template_popup_height",500))}),a.find("listbox")[0].fire("select")}n.addCommand("mceInsertTemplate",e.curry(o.insertTemplate,n)),n.addButton("template",{title:"Insert template",onclick:o.createTemplateList(n.settings,a)}),n.addMenuItem("template",{text:"Template",onclick:o.createTemplateList(n.settings,a),context:"insert"}),n.on("PreProcess",function(e){var t=n.dom;r.each(t.select("div",e.node),function(e){t.hasClass(e,"mceTmpl")&&(r.each(t.select("*",e),function(e){t.hasClass(e,n.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(e.innerHTML=i.getDateTime(n,n.getParam("template_mdate_format",n.getLang("template.mdate_format"))))}),o.replaceVals(n,e))})})}),function(){}}),a("0")()}();